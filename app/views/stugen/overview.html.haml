%h2
  = t('view.overview.title')
  %a{:data => {:toggle => 'collapse', :target => ".stugen-container"}, :title => t('view.overview.expand_all')}
    %i.fa.fa-angle-double-down

.container
  :markdown
    #{t('opening')}

.overview
  - @faculties.each do |fb|
    .faculty{:class => "fb-#{fb.id}"}
      %h3{:data => {:toggle => 'collapse', :target => ".fb-#{fb.id} .stugen-container"}}
        %i.fa.fa-chevron-right
        = t('activerecord.models.faculty.one')
        = fb.id
        &ndash;
        = fb.label
      .container.stugen-container.collapse
        .stugen{:class => "stugen-#{fb.stugen.count}"}
          - fb.stugen.sort_by(&:label).each do |stuga|
            .stuga
              .stuga-body
                %h4.stuga-title
                  = wbr_slash stuga.label
                - unless stuga.confirmed?
                  .stuga-text.stuga-not-confirmed.font-italic.alert.alert-danger
                    %i.fa.fa-exclamation-triangle
                      %span
                        = succeed ': ' do
                          = t('view.overview.not_confirmed.title')
                    :markdown
                      #{t('view.overview.not_confirmed.text', stuga: stuga.label)}
                .stuga-text
                  - unless (stuga.building.blank? and stuga.room.blank?)
                    %a{:target => '_blank', :href => "http://oracle-web.zfn.uni-bremen.de/lageplan/lageplan?haus=#{stuga.building}&raum=#{stuga.room}&pi_anz=0"}
                      %i.fa.fa-home
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.room')
                      %span
                        - unless stuga.room.blank?
                          = succeed ', Raum ' do
                            = stuga.display_name(:building)
                          = stuga.room
                        - else
                          = stuga.display_name(:building)
                  - unless stuga.telephone.blank?
                    %a{:href => "tel:0049#{stuga.telephone.length < 6 ? "421218#{stuga.telephone}" : stuga.telephone}"}
                      %i.fa.fa-phone
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.telephone')
                      %span
                        - if stuga.telephone.length < 6
                          = "218 - #{stuga.telephone}"
                        - else
                          = stuga.telephone
                  - unless stuga.website.blank?
                    %a{:href => stuga.website}
                      %i.fa.fa-globe
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.website')
                      %span
                        = wbr_slash stuga.website.gsub /http[s]?:\/\/(.*?)[\/]?$/, '\1'
                  - unless stuga.email.blank?
                    %a{:href => "mailto:#{stuga.email}"}
                      %i.fa.fa-envelope
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.email')
                      %span
                        = stuga.email
                  - unless stuga.facebook.blank?
                    %a{:href => stuga.facebook}
                      %i.fa.fa-facebook
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.facebook')
                      %span
                        = sm_title stuga.facebook
                  - unless stuga.twitter.blank?
                    %a{:href => stuga.twitter}
                      %i.fa.fa-twitter
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.twitter')
                      %span
                        = sm_title stuga.twitter
                  - unless stuga.youtube.blank?
                    %a{:href => stuga.youtube}
                      %i.fa.fa-youtube
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.youtube')
                      %span
                        = sm_title stuga.youtube
                  - unless stuga.instagram.blank?
                    %a{:href => stuga.instagram}
                      %i.fa.fa-instagram
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.instagram')
                      %span
                        = sm_title stuga.instagram
                  - unless stuga.pinterest.blank?
                    %a{:href => stuga.pinterest}
                      %i.fa.fa-pinterest
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.pinterest')
                      %span
                        = sm_title stuga.pinterest
                  - unless stuga.snapchat.blank?
                    %a{:href => stuga.snapchat}
                      %i.fa.fa-snapchat
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.snapchat')
                      %span
                        = sm_title stuga.snapchat
                  - unless stuga.tumblr.blank?
                    %a{:href => stuga.tumblr}
                      %i.fa.fa-tumblr
                        %span
                          = succeed ': ' do
                            = t('activerecord.attributes.stuga.tumblr')
                      %span
                        = sm_title stuga.tumblr

.container
  :markdown
    #{t('closing')}
